<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes, viewport-fit=cover">
    <title>–®–∏–Ω–æ–º–æ–Ω—Ç–∞–∂ ‚Äî –∏–∫–æ–Ω–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –±–µ–∑ —Ñ–æ–Ω–∞</title>
    <style>
        /* –°–ë–†–û–° –ò –ë–ê–ó–û–í–´–ï –ù–ê–°–¢–†–û–ô–ö–ò */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background: #f2f6fa;
            padding: 12px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            -webkit-tap-highlight-color: transparent;
        }

        .form-container {
            max-width: 480px;
            width: 100%;
            background: white;
            border-radius: 32px;
            padding: 20px 18px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.05);
        }

        h1 {
            font-size: 1.7rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: #0a2f4a;
            border-left: 8px solid #0d6efd;
            padding-left: 16px;
            letter-spacing: -0.5px;
        }

        /* –ö–õ–ò–ö–ê–ë–ï–õ–¨–ù–´–ï –ö–ê–†–¢–û–ß–ö–ò */
        .clickable-card {
            background: #f7fcff;
            border-radius: 24px;
            padding: 18px 16px;
            border: 1px solid #d9e6f2;
            margin-bottom: 16px;
            cursor: pointer;
            transition: background 0.1s;
            -webkit-tap-highlight-color: rgba(13,110,253,0.1);
        }

        .clickable-card:active {
            background: #e6f0f8;
        }

        .card-label {
            font-weight: 700;
            color: #1e3a5f;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .card-content {
            font-size: 1rem;
            color: #124263;
            min-height: 24px;
            word-break: break-word;
            line-height: 1.4;
        }

        .placeholder {
            color: #7c95aa;
            font-style: italic;
        }

        /* –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s;
            backdrop-filter: blur(3px);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: white;
            border-radius: 36px;
            max-width: 480px;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
            padding: 24px 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            animation: slideUp 0.25s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: #0a2f4a;
        }

        .modal-close {
            background: #ecf3f7;
            border: none;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #1e3a5f;
        }

        .modal-close:active {
            background: #dbe5ec;
        }

        .modal-footer {
            display: flex;
            gap: 12px;
            margin-top: 24px;
            justify-content: flex-end;
        }

        .modal-footer .btn {
            flex: 0 1 auto;
            padding: 14px 24px;
        }

        /* –°–ü–ò–°–û–ö –ú–ï–•–ê–ù–ò–ö–û–í –° –ß–ï–ö–ë–û–ö–°–ê–ú–ò */
        .mechanics-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .mechanic-item {
            display: flex;
            align-items: center;
            gap: 16px;
            background: #f8fdff;
            padding: 14px 18px;
            border-radius: 60px;
            border: 1px solid #cde0eb;
        }

        .mechanic-item input[type="checkbox"] {
            width: 26px;
            height: 26px;
            accent-color: #0d6efd;
        }

        .mechanic-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: #124263;
        }

        /* –ü–û–õ–Ø –í–í–û–î–ê –í –ú–û–î–ê–õ–ö–ï –ö–õ–ò–ï–ù–¢–ê */
        .input-field {
            margin-bottom: 20px;
        }

        .input-field label {
            display: block;
            font-weight: 700;
            color: #1e3a5f;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .input-field input {
            width: 100%;
            border: 1.8px solid #c2d6e6;
            border-radius: 60px;
            padding: 16px 22px;
            font-size: 1.1rem;
            background: white;
        }

        /* –ë–õ–û–ö –ü–ê–†–ê–ú–ï–¢–†–û–í –ö–û–õ–Å–° –í –ú–û–î–ê–õ–ö–ï */
        .wheels-modal-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .radius-select-wrap {
            width: 100%;
        }

        .radius-select-wrap select {
            width: 100%;
            font-size: 1.9rem;
            font-weight: 800;
            padding: 12px 20px;
            text-align: center;
            text-align-last: center;
            background: white;
            border: 2.5px solid #0d6efd;
            border-radius: 60px;
            color: #003153;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="%230d6efd" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>');
            background-repeat: no-repeat;
            background-position: right 20px center;
            background-size: 32px;
            appearance: none;
        }

        .check-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .check-row {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .check-row label {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: #f5fafd;
            padding: 16px 12px;
            border-radius: 60px;
            font-size: 1.1rem;
            font-weight: 600;
            color: #124263;
            border: 1.8px solid #c2d9e8;
            flex: 1 1 130px;
            cursor: pointer;
        }

        .check-row input[type="checkbox"] {
            width: 26px;
            height: 26px;
            accent-color: #0d6efd;
            pointer-events: none;
        }

        .car-icon {
            font-size: 1.4rem;
        }

        .qty-wrap {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #e5f0f7;
            padding: 16px 20px;
            border-radius: 60px;
        }

        .qty-wrap label {
            font-weight: 700;
            font-size: 1.2rem;
            color: #12507a;
        }

        .carousel-select {
            background: white;
            border: 2px solid #9fb7c7;
            border-radius: 60px;
            padding: 14px 40px 14px 24px;
            font-size: 1.3rem;
            font-weight: 700;
            width: 140px;
            text-align-last: center;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="%231e3a5f" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>');
            background-repeat: no-repeat;
            background-position: right 16px center;
            background-size: 28px;
            appearance: none;
        }

        /* –°–ü–ò–°–ö–ò –ú–ê–¢–ï–†–ò–ê–õ–û–í/–£–°–õ–£–ì */
        .items-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 16px 0;
        }

        .item-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #f8fdff;
            padding: 12px 16px;
            border-radius: 100px;
            border: 1px solid #cde0eb;
            flex-wrap: wrap;
            gap: 12px;
        }

        .item-name {
            font-weight: 600;
            color: #1e3f5e;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1rem;
            flex: 1 1 160px;
        }

        .item-number {
            color: #0d6efd;
            font-weight: 800;
            background: #e2eff9;
            width: 38px;
            height: 38px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 30px;
            font-size: 1rem;
        }

        .item-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .qty-carousel {
            border: 2px solid #c2d1db;
            border-radius: 60px;
            padding: 12px 36px 12px 20px;
            font-size: 1.15rem;
            font-weight: 600;
            background: white;
            width: 110px;
            text-align-last: center;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%232c3e50" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>');
            background-repeat: no-repeat;
            background-position: right 14px center;
            background-size: 24px;
            appearance: none;
        }

        /* –ò–ö–û–ù–ö–ê –£–î–ê–õ–ï–ù–ò–Ø –ë–ï–ó –§–û–ù–ê */
        .delete-icon {
            background: transparent;
            border: none;
            width: 56px;
            height: 56px;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #4a6a85;
            transition: opacity 0.1s;
            -webkit-tap-highlight-color: transparent;
            padding: 0;
        }

        .delete-icon:active {
            opacity: 0.5;
            transform: scale(0.94);
        }

        /* –ö–ù–û–ü–ö–ê –£–°–¢–ê–ù–û–í–ò–¢–¨ –î–õ–Ø –í–°–ï–• */
        .apply-all-btn {
            background: #0d6efd;
            color: white;
            border: none;
            border-radius: 60px;
            padding: 16px 20px;
            font-weight: 700;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            width: 100%;
            box-shadow: 0 8px 18px rgba(13,110,253,0.25);
            cursor: pointer;
            margin-top: 16px;
        }

        .apply-all-btn:active {
            background: #0b5ed7;
            transform: scale(0.98);
        }

        /* –ö–ù–û–ü–ö–ò –î–ï–ô–°–¢–í–ò–ô */
        .footer-actions {
            display: flex;
            gap: 14px;
            margin-top: 20px;
        }

        .btn {
            border: none;
            padding: 18px 20px;
            border-radius: 60px;
            font-weight: 700;
            font-size: 1.15rem;
            background: #ecf3f7;
            color: #1e3a5f;
            cursor: pointer;
            flex: 1;
            text-align: center;
        }

        .btn:active {
            background: #dbe5ec;
            transform: scale(0.98);
        }

        .btn-primary {
            background: #0d6efd;
            color: white;
        }

        .btn-primary:active {
            background: #0b5ed7;
        }
    </style>
</head>
<body>
<div class="form-container">
    <h1>üõû –®–∏–Ω–æ–º–æ–Ω—Ç–∞–∂</h1>
    
    <!-- –ö–ê–†–¢–û–ß–ö–ê –ú–ï–•–ê–ù–ò–ö–û–í -->
    <div class="clickable-card" id="mechanicsCard">
        <div class="card-label"><span>üîß</span> –ú–µ—Ö–∞–Ω–∏–∫–∏</div>
        <div class="card-content" id="mechanicsDisplay"><span class="placeholder">–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ö–∞–Ω–∏–∫–æ–≤</span></div>
    </div>
    
    <!-- –ö–ê–†–¢–û–ß–ö–ê –ö–õ–ò–ï–ù–¢–ê -->
    <div class="clickable-card" id="clientCard">
        <div class="card-label"><span>üë•</span> –ö–ª–∏–µ–Ω—Ç</div>
        <div class="card-content" id="clientDisplay"><span class="placeholder">–î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</span></div>
    </div>

    <!-- –ö–ê–†–¢–û–ß–ö–ê –ü–ê–†–ê–ú–ï–¢–†–û–í –ö–û–õ–Å–° -->
    <div class="clickable-card" id="wheelsCard">
        <div class="card-label"><span>‚öôÔ∏è</span> –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–ª—ë—Å</div>
        <div class="card-content" id="wheelsDisplay"><span class="placeholder">–ù–µ –≤—ã–±—Ä–∞–Ω—ã</span></div>
    </div>

    <!-- –ö–ê–†–¢–û–ß–ö–ê –ú–ê–¢–ï–†–ò–ê–õ–û–í -->
    <div class="clickable-card" id="materialsCard">
        <div class="card-label"><span>üß¥</span> –ú–∞—Ç–µ—Ä–∏–∞–ª—ã</div>
        <div class="card-content" id="materialsDisplay"><span class="placeholder">–ù–µ—Ç –ø–æ–∑–∏—Ü–∏–π</span></div>
    </div>

    <!-- –ö–ê–†–¢–û–ß–ö–ê –£–°–õ–£–ì -->
    <div class="clickable-card" id="servicesCard">
        <div class="card-label"><span>üîß</span> –£—Å–ª—É–≥–∏</div>
        <div class="card-content" id="servicesDisplay"><span class="placeholder">–ù–µ—Ç –ø–æ–∑–∏—Ü–∏–π</span></div>
    </div>

    <!-- –ö–ù–û–ü–ö–ò -->
    <div class="footer-actions">
        <button class="btn" id="resetBtn">–°–±—Ä–æ—Å–∏—Ç—å</button>
        <button class="btn btn-primary" id="saveBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    </div>
</div>

<!-- –ú–û–î–ê–õ–ö–ê –ú–ï–•–ê–ù–ò–ö–û–í -->
<div id="mechanicsModal" class="modal-overlay">
    <div class="modal-content">
        <div class="modal-header">
            <h2>üîß –í—ã–±–æ—Ä –º–µ—Ö–∞–Ω–∏–∫–æ–≤</h2>
            <button class="modal-close" id="closeMechanicsModal">‚úï</button>
        </div>
        <div class="mechanics-list" id="mechanicsList"></div>
        <div class="modal-footer">
            <button class="btn" id="cancelMechanicsBtn">–û—Ç–º–µ–Ω–∞</button>
            <button class="btn btn-primary" id="saveMechanicsBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
    </div>
</div>

<!-- –ú–û–î–ê–õ–ö–ê –ö–õ–ò–ï–ù–¢–ê -->
<div id="clientModal" class="modal-overlay">
    <div class="modal-content">
        <div class="modal-header">
            <h2>üë• –î–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞</h2>
            <button class="modal-close" id="closeClientModal">‚úï</button>
        </div>
        <div class="input-field">
            <label>–§–ò–û</label>
            <input type="text" id="clientNameInput" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á">
        </div>
        <div class="input-field">
            <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
            <input type="tel" id="clientPhoneInput" placeholder="+7 (999) 123-45-67">
        </div>
        <div class="input-field">
            <label>–ê–≤—Ç–æ–º–æ–±–∏–ª—å</label>
            <input type="text" id="clientCarInput" placeholder="Toyota Camry, –≥–æ—Å–Ω–æ–º–µ—Ä">
        </div>
        <div class="modal-footer">
            <button class="btn" id="cancelClientBtn">–û—Ç–º–µ–Ω–∞</button>
            <button class="btn btn-primary" id="saveClientBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
    </div>
</div>

<!-- –ú–û–î–ê–õ–ö–ê –ü–ê–†–ê–ú–ï–¢–†–û–í –ö–û–õ–Å–° -->
<div id="wheelsModal" class="modal-overlay">
    <div class="modal-content">
        <div class="modal-header">
            <h2>‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–ª—ë—Å</h2>
            <button class="modal-close" id="closeWheelsModal">‚úï</button>
        </div>
        <div class="wheels-modal-content">
            <div class="radius-select-wrap">
                <select id="modalDiameterSelect">
                    <option value="13">R13</option><option value="14">R14</option><option value="15">R15</option><option value="16">R16</option>
                    <option value="17" selected>R17</option><option value="18">R18</option><option value="19">R19</option><option value="20">R20</option>
                    <option value="21">R21</option><option value="22">R22</option><option value="23">R23</option><option value="24">R24</option>
                </select>
            </div>
            <div class="check-group">
                <div class="check-row">
                    <label><input type="checkbox" id="modalCarLight" class="modal-type-check car-type-group"><span class="car-icon">üöó</span> –õ–µ–≥–∫–æ–≤–∞—è</label>
                    <label><input type="checkbox" id="modalCarJeep" class="modal-type-check car-type-group"><span class="car-icon">üõª</span> –î–∂–∏–ø</label>
                </div>
                <div class="check-row">
                    <label><input type="checkbox" id="modalCarLowProfile" class="modal-type-check"><span class="car-icon">‚ö°</span> –ù–∏–∑–∫–∏–π –ø—Ä–æ—Ñ–∏–ª—å</label>
                    <label><input type="checkbox" id="modalCarRunflat" class="modal-type-check"><span class="car-icon">üõ°Ô∏è</span> RunFlat</label>
                </div>
            </div>
            <div class="qty-wrap">
                <label>üî¢ –ö–æ–ª-–≤–æ</label>
                <select id="modalWheelsQty" class="carousel-select">
                    <option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option>
                    <option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option>
                </select>
            </div>
            <button type="button" id="applyAllBtn" class="apply-all-btn">‚ö° –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–ª—è –≤—Å–µ—Ö</button>
        </div>
        <div class="modal-footer">
            <button class="btn" id="cancelWheelsBtn">–û—Ç–º–µ–Ω–∞</button>
            <button class="btn btn-primary" id="saveWheelsBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
    </div>
</div>

<!-- –ú–û–î–ê–õ–ö–ê –ú–ê–¢–ï–†–ò–ê–õ–û–í -->
<div id="materialsModal" class="modal-overlay">
    <div class="modal-content">
        <div class="modal-header">
            <h2>üß¥ –ú–∞—Ç–µ—Ä–∏–∞–ª—ã</h2>
            <button class="modal-close" id="closeMaterialsModal">‚úï</button>
        </div>
        <div class="items-list" id="materialsModalList"></div>
        <div class="modal-footer">
            <button class="btn" id="cancelMaterialsBtn">–û—Ç–º–µ–Ω–∞</button>
            <button class="btn btn-primary" id="saveMaterialsBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
    </div>
</div>

<!-- –ú–û–î–ê–õ–ö–ê –£–°–õ–£–ì -->
<div id="servicesModal" class="modal-overlay">
    <div class="modal-content">
        <div class="modal-header">
            <h2>üîß –£—Å–ª—É–≥–∏</h2>
            <button class="modal-close" id="closeServicesModal">‚úï</button>
        </div>
        <div class="items-list" id="servicesModalList"></div>
        <div class="modal-footer">
            <button class="btn" id="cancelServicesBtn">–û—Ç–º–µ–Ω–∞</button>
            <button class="btn btn-primary" id="saveServicesBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
    </div>
</div>

<script>
    (function() {
        "use strict";

        // ---------- –î–ê–ù–ù–´–ï ----------
        const mechanicsNames = [
            '–ê–Ω–¥—Ä–µ–µ–≤ –ê–Ω–¥—Ä–µ–π', '–ë–æ—Ä–∏—Å–æ–≤–∞ –ë–æ—Ä–∏—Å–ª–∞–≤–∞', '–í–ª–∞—Å–æ–≤ –í–ª–∞–¥–∏—Å–ª–∞–≤', '–ì—Ä–∏–≥–æ—Ä—å–µ–≤–∞ –ì–∞–ª–∏–Ω–∞',
            '–î–º–∏—Ç—Ä–∏–µ–≤ –î–º–∏—Ç—Ä–∏–π', '–ï–∫–∞—Ç–µ—Ä–∏–Ω–∏–Ω–∞ –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞', '–ñ—É–∫–æ–≤ –ñ–æ—Ä–∂', '–ó–∞–π—Ü–µ–≤ –ó–∞—Ö–∞—Ä'
        ];

        const materialsData = [
            { num: 1, name: '–†–∞—Å—Ö–æ–¥–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã' },
            { num: 2, name: '–ì—Ä—É–∑–∏–∫ –Ω–∞–±–∏–≤–Ω–æ–π' },
            { num: 3, name: '–ì—Ä—É–∑–∏–∫ —Å–∞–º–æ–∫–ª–µ—é—â–∏–π—Å—è' },
            { num: 4, name: '–í–µ–Ω—Ç–∏–ª—å –ø—Ä–æ—Å—Ç.' },
            { num: 5, name: '–í–µ–Ω—Ç–∏–ª—å —Ö—Ä–æ–º' },
            { num: 7, name: '–ñ–≥—É—Ç' }
        ];

        const servicesData = [
            { num: 1, name: '–°—ä–µ–º –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–ª–µ—Å–∞' },
            { num: 2, name: '–î–µ–º–æ–Ω—Ç–∞–∂ —à–∏–Ω—ã' },
            { num: 3, name: '–ú–æ–Ω—Ç–∞–∂ —à–∏–Ω—ã' },
            { num: 4, name: '–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞' },
            { num: 5, name: '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –º–æ–π–∫–∞' },
            { num: 6, name: '–°–ª–æ–∂–Ω–æ—Å—Ç—å —à/–º —Å –¥–∞—Ç—á–∏–∫–æ–º' },
            { num: 7, name: '–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—É–ø–∏—Ü—ã/–≥–µ—Ä–º–µ—Ç–∏–∫' },
            { num: 8, name: '–®–∏–Ω–æ—Ä–µ–º–æ–Ω—Ç –∂–≥—É—Ç–æ–º' },
            { num: 9, name: '–°—ä–µ–º –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–º–µ—Ä—ã' },
            { num: 10, name: '–ü–æ–≥—Ä—É–∑–∫–∞ –∫–æ–ª–µ—Å–æ/—Å–±–æ—Ä–µ' }
        ];

        // ---------- –°–û–°–¢–û–Ø–ù–ò–ï ----------
        let selectedMechanics = [];
        let clientData = { name: '', phone: '', car: '' };
        
        // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–ª—ë—Å
        let wheelsData = {
            radius: '17',
            light: false,
            jeep: false,
            lowProfile: false,
            runflat: false,
            qty: '4'
        };

        // –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ —É—Å–ª—É–≥–∏
        let materialsState = materialsData.map(item => ({ ...item, qty: 1 }));
        let servicesState = servicesData.map(item => ({ ...item, qty: 1 }));

        // ---------- –§–£–ù–ö–¶–ò–ò –û–ë–ù–û–í–õ–ï–ù–ò–Ø –ö–ê–†–¢–û–ß–ï–ö ----------
        function updateMechanicsDisplay() {
            const display = document.getElementById('mechanicsDisplay');
            if (selectedMechanics.length === 0) {
                display.innerHTML = '<span class="placeholder">–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ö–∞–Ω–∏–∫–æ–≤</span>';
            } else {
                display.textContent = selectedMechanics.join(', ');
            }
        }

        function updateClientDisplay() {
            const display = document.getElementById('clientDisplay');
            if (!clientData.name && !clientData.phone && !clientData.car) {
                display.innerHTML = '<span class="placeholder">–î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</span>';
                return;
            }
            let parts = [];
            if (clientData.name) parts.push(clientData.name);
            if (clientData.phone) parts.push(clientData.phone);
            if (clientData.car) parts.push(clientData.car);
            display.textContent = parts.join(' ‚Ä¢ ');
        }

        function updateWheelsDisplay() {
            const display = document.getElementById('wheelsDisplay');
            let typeParts = [];
            if (wheelsData.light) typeParts.push('üöó –õ–µ–≥–∫–æ–≤–∞—è');
            if (wheelsData.jeep) typeParts.push('üõª –î–∂–∏–ø');
            if (wheelsData.lowProfile) typeParts.push('‚ö° –ù–∏–∑–∫–∏–π');
            if (wheelsData.runflat) typeParts.push('üõ°Ô∏è RunFlat');
            const typeStr = typeParts.length ? typeParts.join(', ') : '–±–µ–∑ —Ç–∏–ø–∞';
            display.textContent = `R${wheelsData.radius}, ${typeStr}, ${wheelsData.qty} —à—Ç`;
        }

        function updateMaterialsDisplay() {
            const display = document.getElementById('materialsDisplay');
            const nonZero = materialsState.filter(item => item.qty > 0);
            if (nonZero.length === 0) {
                display.innerHTML = '<span class="placeholder">–ù–µ—Ç –ø–æ–∑–∏—Ü–∏–π</span>';
            } else {
                const parts = nonZero.map(item => {
                    let shortName = item.name.length > 15 ? item.name.substring(0, 12) + '‚Ä¶' : item.name;
                    return `${shortName} (${item.qty})`;
                });
                display.textContent = parts.join(' ‚Ä¢ ');
            }
        }

        function updateServicesDisplay() {
            const display = document.getElementById('servicesDisplay');
            const nonZero = servicesState.filter(item => item.qty > 0);
            if (nonZero.length === 0) {
                display.innerHTML = '<span class="placeholder">–ù–µ—Ç –ø–æ–∑–∏—Ü–∏–π</span>';
            } else {
                const parts = nonZero.map(item => {
                    let shortName = item.name.length > 15 ? item.name.substring(0, 12) + '‚Ä¶' : item.name;
                    return `${shortName} (${item.qty})`;
                });
                display.textContent = parts.join(' ‚Ä¢ ');
            }
        }

        // ---------- –†–ê–î–ò–û-–õ–û–ì–ò–ö–ê –î–õ–Ø –õ–ï–ì–ö–û–í–ê–Ø/–î–ñ–ò–ü ----------
        function setupRadioLogic() {
            const modalLight = document.getElementById('modalCarLight');
            const modalJeep = document.getElementById('modalCarJeep');
            modalLight.addEventListener('change', function() {
                if (modalLight.checked) modalJeep.checked = false;
            });
            modalJeep.addEventListener('change', function() {
                if (modalJeep.checked) modalLight.checked = false;
            });
        }

        // ---------- –ó–ê–ü–û–õ–ù–ï–ù–ò–ï –ú–û–î–ê–õ–û–ö –¢–ï–ö–£–©–ò–ú–ò –î–ê–ù–ù–´–ú–ò ----------
        function openMechanicsModal() {
            const list = document.getElementById('mechanicsList');
            list.innerHTML = '';
            mechanicsNames.forEach(name => {
                const checked = selectedMechanics.includes(name) ? 'checked' : '';
                list.innerHTML += `
                    <div class="mechanic-item">
                        <input type="checkbox" value="${name}" ${checked}>
                        <span class="mechanic-name">${name}</span>
                    </div>
                `;
            });
            document.getElementById('mechanicsModal').classList.add('active');
        }

        function openClientModal() {
            document.getElementById('clientNameInput').value = clientData.name || '';
            document.getElementById('clientPhoneInput').value = clientData.phone || '';
            document.getElementById('clientCarInput').value = clientData.car || '';
            document.getElementById('clientModal').classList.add('active');
        }

        function openWheelsModal() {
            document.getElementById('modalDiameterSelect').value = wheelsData.radius;
            document.getElementById('modalCarLight').checked = wheelsData.light;
            document.getElementById('modalCarJeep').checked = wheelsData.jeep;
            document.getElementById('modalCarLowProfile').checked = wheelsData.lowProfile;
            document.getElementById('modalCarRunflat').checked = wheelsData.runflat;
            document.getElementById('modalWheelsQty').value = wheelsData.qty;
            document.getElementById('wheelsModal').classList.add('active');
        }

        function renderMaterialsModal() {
            const container = document.getElementById('materialsModalList');
            container.innerHTML = '';
            materialsState.forEach(item => {
                const row = document.createElement('div');
                row.className = 'item-row';
                row.innerHTML = `
                    <span class="item-name"><span class="item-number">${item.num}</span> ${item.name}</span>
                    <div class="item-controls">
                        <select class="qty-carousel material-qty-modal" data-num="${item.num}">
                            <option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option>
                            <option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option>
                        </select>
                        <button type="button" class="delete-icon" data-num="${item.num}"><span>üóëÔ∏è</span></button>
                    </div>
                `;
                container.appendChild(row);
                const select = row.querySelector('.qty-carousel');
                select.value = item.qty;
            });
        }

        function openMaterialsModal() {
            renderMaterialsModal();
            document.getElementById('materialsModal').classList.add('active');
        }

        function renderServicesModal() {
            const container = document.getElementById('servicesModalList');
            container.innerHTML = '';
            servicesState.forEach(item => {
                const row = document.createElement('div');
                row.className = 'item-row';
                row.innerHTML = `
                    <span class="item-name"><span class="item-number">${item.num}</span> ${item.name}</span>
                    <div class="item-controls">
                        <select class="qty-carousel service-qty-modal" data-num="${item.num}">
                            <option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option>
                            <option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option>
                        </select>
                        <button type="button" class="delete-icon" data-num="${item.num}"><span>üóëÔ∏è</span></button>
                    </div>
                `;
                container.appendChild(row);
                const select = row.querySelector('.qty-carousel');
                select.value = item.qty;
            });
        }

        function openServicesModal() {
            renderServicesModal();
            document.getElementById('servicesModal').classList.add('active');
        }

        // ---------- –°–û–•–†–ê–ù–ï–ù–ò–ï –ò–ó –ú–û–î–ê–õ–û–ö ----------
        function saveMechanics() {
            const checkboxes = document.querySelectorAll('#mechanicsList input[type="checkbox"]');
            selectedMechanics = [];
            checkboxes.forEach(cb => { if (cb.checked) selectedMechanics.push(cb.value); });
            updateMechanicsDisplay();
            document.getElementById('mechanicsModal').classList.remove('active');
        }

        function saveClient() {
            clientData.name = document.getElementById('clientNameInput').value.trim();
            clientData.phone = document.getElementById('clientPhoneInput').value.trim();
            clientData.car = document.getElementById('clientCarInput').value.trim();
            updateClientDisplay();
            document.getElementById('clientModal').classList.remove('active');
        }

        function saveWheels() {
            wheelsData.radius = document.getElementById('modalDiameterSelect').value;
            wheelsData.light = document.getElementById('modalCarLight').checked;
            wheelsData.jeep = document.getElementById('modalCarJeep').checked;
            wheelsData.lowProfile = document.getElementById('modalCarLowProfile').checked;
            wheelsData.runflat = document.getElementById('modalCarRunflat').checked;
            wheelsData.qty = document.getElementById('modalWheelsQty').value;
            updateWheelsDisplay();
            document.getElementById('wheelsModal').classList.remove('active');
        }

        function saveMaterials() {
            const selects = document.querySelectorAll('#materialsModalList .material-qty-modal');
            selects.forEach(select => {
                const num = parseInt(select.dataset.num, 10);
                const item = materialsState.find(m => m.num === num);
                if (item) item.qty = parseInt(select.value, 10);
            });
            updateMaterialsDisplay();
            document.getElementById('materialsModal').classList.remove('active');
        }

        function saveServices() {
            const selects = document.querySelectorAll('#servicesModalList .service-qty-modal');
            selects.forEach(select => {
                const num = parseInt(select.dataset.num, 10);
                const item = servicesState.find(s => s.num === num);
                if (item) item.qty = parseInt(select.value, 10);
            });
            updateServicesDisplay();
            document.getElementById('servicesModal').classList.remove('active');
        }

        // ---------- –£–°–¢–ê–ù–û–í–ò–¢–¨ –î–õ–Ø –í–°–ï–• (–∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–ª—ë—Å) ----------
        function applyAllFromWheels() {
            const globalQty = parseInt(document.getElementById('modalWheelsQty').value, 10);
            materialsState.forEach(item => item.qty = globalQty);
            servicesState.forEach(item => item.qty = globalQty);
            updateMaterialsDisplay();
            updateServicesDisplay();
            if (document.getElementById('materialsModal').classList.contains('active')) {
                renderMaterialsModal();
            }
            if (document.getElementById('servicesModal').classList.contains('active')) {
                renderServicesModal();
            }
        }

        // ---------- –ö–ù–û–ü–ö–ò –£–î–ê–õ–ï–ù–ò–Ø –í –ú–û–î–ê–õ–ö–ê–• ----------
        function setupModalDeleteListeners(containerId, stateArray) {
            const container = document.getElementById(containerId);
            container.addEventListener('click', (e) => {
                const deleteBtn = e.target.closest('.delete-icon');
                if (!deleteBtn) return;
                const num = parseInt(deleteBtn.dataset.num, 10);
                const item = stateArray.find(i => i.num === num);
                if (item) {
                    item.qty = 0;
                    const row = deleteBtn.closest('.item-row');
                    const select = row.querySelector('.qty-carousel');
                    if (select) {
                        if (!select.querySelector('option[value="0"]')) {
                            const opt = document.createElement('option');
                            opt.value = '0';
                            opt.textContent = '0';
                            select.prepend(opt);
                        }
                        select.value = '0';
                    }
                }
            });
        }

        // ---------- –°–ë–†–û–° –§–û–†–ú–´ ----------
        function resetAll() {
            selectedMechanics = [];
            clientData = { name: '', phone: '', car: '' };
            wheelsData = { radius: '17', light: false, jeep: false, lowProfile: false, runflat: false, qty: '4' };
            materialsState = materialsData.map(item => ({ ...item, qty: 1 }));
            servicesState = servicesData.map(item => ({ ...item, qty: 1 }));
            updateMechanicsDisplay();
            updateClientDisplay();
            updateWheelsDisplay();
            updateMaterialsDisplay();
            updateServicesDisplay();
        }

        // ---------- –°–û–•–†–ê–ù–ò–¢–¨ (–ü–†–û–°–ú–û–¢–†) ----------
        function saveForm() {
            let mechText = selectedMechanics.length ? selectedMechanics.join(', ') : '–Ω–µ –≤—ã–±—Ä–∞–Ω—ã';
            let clientText = `${clientData.name || '–Ω–µ —É–∫–∞–∑–∞–Ω–æ'}, ${clientData.phone || '–Ω–µ—Ç —Ç–µ–ª.'}, ${clientData.car || '–Ω–µ—Ç –∞–≤—Ç–æ'}`;
            let materialsNonZero = materialsState.filter(m => m.qty > 0).length;
            let servicesNonZero = servicesState.filter(s => s.qty > 0).length;
            alert(`‚úÖ –ó–∞–∫–∞–∑\n–ú–µ—Ö–∞–Ω–∏–∫–∏: ${mechText}\n–ö–ª–∏–µ–Ω—Ç: ${clientText}\n–ö–æ–ª—ë—Å–∞: R${wheelsData.radius}, ${wheelsData.qty} —à—Ç\n–ú–∞—Ç–µ—Ä–∏–∞–ª—ã: ${materialsNonZero} –ø–æ–∑–∏—Ü–∏–π\n–£—Å–ª—É–≥–∏: ${servicesNonZero} –ø–æ–∑–∏—Ü–∏–π`);
        }

        // ---------- –û–ë–†–ê–ë–û–¢–ß–ò–ö ENTER –î–õ–Ø –ú–û–î–ê–õ–û–ö ----------
        function setupEnterHandler() {
            document.addEventListener('keydown', (e) => {
                if (e.key !== 'Enter') return;
                const target = e.target;
                if (target.closest('button') || target.closest('.btn') || target.closest('.modal-close')) {
                    return;
                }
                const activeModal = document.querySelector('.modal-overlay.active');
                if (!activeModal) return;
                const saveBtn = activeModal.querySelector('.btn-primary');
                if (saveBtn) {
                    e.preventDefault();
                    saveBtn.click();
                }
            });
        }

        // ---------- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ----------
        function init() {
            // –ö–∞—Ä—Ç–æ—á–∫–∏
            document.getElementById('mechanicsCard').addEventListener('click', openMechanicsModal);
            document.getElementById('clientCard').addEventListener('click', openClientModal);
            document.getElementById('wheelsCard').addEventListener('click', openWheelsModal);
            document.getElementById('materialsCard').addEventListener('click', openMaterialsModal);
            document.getElementById('servicesCard').addEventListener('click', openServicesModal);

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–æ–∫ –ø–æ –∫—Ä–µ—Å—Ç–∏–∫—É –∏ –æ—Ç–º–µ–Ω–µ
            document.querySelectorAll('.modal-close, .btn:not(.btn-primary)').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const modal = e.target.closest('.modal-overlay');
                    if (modal) modal.classList.remove('active');
                });
            });

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
            document.getElementById('saveMechanicsBtn').addEventListener('click', saveMechanics);
            document.getElementById('saveClientBtn').addEventListener('click', saveClient);
            document.getElementById('saveWheelsBtn').addEventListener('click', saveWheels);
            document.getElementById('saveMaterialsBtn').addEventListener('click', saveMaterials);
            document.getElementById('saveServicesBtn').addEventListener('click', saveServices);

            // –ö–Ω–æ–ø–∫–∞ "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–ª—è –≤—Å–µ—Ö"
            document.getElementById('applyAllBtn').addEventListener('click', applyAllFromWheels);

            // –ö–Ω–æ–ø–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è
            setupModalDeleteListeners('materialsModalList', materialsState);
            setupModalDeleteListeners('servicesModalList', servicesState);

            // –†–∞–¥–∏–æ-–ª–æ–≥–∏–∫–∞
            setupRadioLogic();

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ Enter
            setupEnterHandler();

            // –°–±—Ä–æ—Å
            document.getElementById('resetBtn').addEventListener('click', resetAll);

            // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å (–æ—Å–Ω–æ–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞)
            document.getElementById('saveBtn').addEventListener('click', saveForm);

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –Ω–∞ –æ–≤–µ—Ä–ª–µ–π
            document.querySelectorAll('.modal-overlay').forEach(overlay => {
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) overlay.classList.remove('active');
                });
            });

            // –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            updateMechanicsDisplay();
            updateClientDisplay();
            updateWheelsDisplay();
            updateMaterialsDisplay();
            updateServicesDisplay();
        }

        init();
    })();
</script>

</body>
</html>